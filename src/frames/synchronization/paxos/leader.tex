% SPDX-License-Identifier: CC-BY-SA-4.0
% Author: Matthieu Perrin
% Part: 
% Section: 
% Sub-section: 
% Frame: 

\begingroup

\SetKwFunction{Leader}{leader}
\SetKwFunction{Propose}{propose}

\begin{frame}[fragile]{Notion de \emph{leader}}

  \onBlock[top=-3mm]{Perpetual leader}{
    Une fonction $\Leader()$ qui retourne un (identifiant de) processus telle que:
    \vspace{.5mm}
    \begin{itemize}
    \item $\Leader()$ retourne \alert{toujours le même} processus à tous les processus
    \item $\Leader()$ retourne un processus \alert{correct}
    \end{itemize}
    \only<3->{\alert{Problème : hypothèse irréaliste !}}
  }

  \onBlock<2>[y=7mm, anchor=north]{Un algorithme centralisé}{
    \begin{algorithm}[H]
      \lLVariables{}{$\mathit{decided}_i \leftarrow \bot$}
      \Operation{$\Propose(val_i)$}{
        \If{$leader() = i$}{
          \Broadcast{rb} $\textsc{decide}(val_i)$
        }
        \Wait $\mathit{decided}_i \neq\bot$\;
        \Return $\mathit{decided}_i$\;
      }
      \When{\Deliver{rb} $\textsc{decide}(v)$ \From $p_j$}{
        $\mathit{decided}_i \leftarrow v$\;
      }
    \end{algorithm}
  }

  \obExampleBlock<3>[y=7mm, anchor=north]{En pratique, sur un réseau}{
    \begin{description}
    \item[Périodes stables :] $\pm$ synchrones, pas de crash, possibilité d'élire un leader
    \item[Périodes instables :] désaccord sur le leader
    \end{description}
  }


  \obBlock[bottom=2mm]<3>{Eventual leader}{
    \begin{itemize}
      \vspace{-1mm}
    \item $\Leader()$ \alert{finira par} retourner le même processus à tous les processus
    \item $\Leader()$ \alert{finira par} retourner un processus correct
    \end{itemize}
    \only<3->{\alert{Comment s'assurer que deux leaders prennent des décisions cohérentes ?}}
  }

\end{frame}

\endgroup
\endinput
